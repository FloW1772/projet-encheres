<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>Liste des enchères</title>
</head>
<body>

    <h1>Liste des enchères</h1>

    <!--  Barre de filtres -->
    <form method="get" th:action="@{/encheres}">
        <label for="nomArticle">Le nom de l'article contient :</label>
        <input type="text" id="nomArticle" name="nomArticle" th:value="${nomRecherche}" />

        <label for="categorie">Catégorie :</label>
        <select id="categorie" name="categorie">
            <option value="0">Toutes</option>
            <option th:each="cat : ${categories}"
       				th:value="${cat.idCategorie}"
      			    th:text="${cat.libelle}"
       			    th:selected="${cat.idCategorie == categorieRecherche}">
            </option>
        </select>

        <button type="submit">Rechercher</button>
    </form>

    <br>

    <!-- Liste des articles sous forme de cartes -->
    <div th:if="${encheres != null}">
        <div th:each="enchere : ${encheres}">
            
            <p th:text="${enchere.article.nomArticle}">Nom article</p>

            <p>
                Prix :
                <span th:text="${enchere.montant}">0</span> points
            </p>

            <p>
                Fin de l'enchère :
                <span th:text="${#temporals.format(enchere.article.dateFinEncheres, 'dd/MM/yyyy')}">10/08/2018</span>
            </p>

            <p>
                Vendeur :
                <span th:text="${enchere.article.vendeur.pseudo}">jojo44</span>
            </p>

            <!-- Lien vers la fiche détail -->
            <a th:href="@{'/article/' + ${enchere.article.idArticle}}">Voir détail</a>
        </div>
    </div>

</body>
</html>